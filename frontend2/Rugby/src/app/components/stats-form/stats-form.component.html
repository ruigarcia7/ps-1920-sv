<ion-header translucent>
  <ion-toolbar>
    <ion-segment [(ngModel)]="segment">
      <ion-segment-button value="form">
        Form
      </ion-segment-button>
      <ion-segment-button value="preview">
        Preview
      </ion-segment-button>
    </ion-segment>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/app/stats"></ion-back-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button size="large" fill="solid" (click)="openSubMenu()">
        <ion-icon name="key-outline"></ion-icon>
      </ion-button>
      <ion-button size="large" fill="solid" (click)="openFilterMenu()">
        <ion-icon slot="icon-only" name="options"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen="true">
  <ion-menu side="end" contentId="main" menuId="subtitle">
    <ion-header>
      <ion-toolbar translucent>
        <ion-title> Subtitles </ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="closeSubMenu()">
            <ion-icon name="close-outline"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content>
      <ion-list>
        <ion-item>
          <ion-label> E - Errors </ion-label>
        </ion-item>
        <ion-item>
          <ion-label> F - Fouls </ion-label>
        </ion-item>
        <ion-item>
          <ion-label> RC - Red Cards</ion-label>
        </ion-item>
        <ion-item>
          <ion-label> YC - Yellow Cards</ion-label>
        </ion-item>
        <ion-item>
          <ion-label> TO - TurnOvers</ion-label>
        </ion-item>
        <ion-item>
          <ion-label> Tr - Tries </ion-label>
        </ion-item>
        <ion-item>
          <ion-label> M - Mauls </ion-label>
        </ion-item>
        <ion-item>
          <ion-label> PT - Playing Time </ion-label>
        </ion-item>
        <ion-item>
          <ion-label> Ta - Tackles </ion-label>
        </ion-item>
        <ion-item>
          <ion-label> CK - Conversion Kicks </ion-label>
        </ion-item>
        <ion-item>
          <ion-label> GK - Goal Kicks </ion-label>
        </ion-item>
        <ion-item>
          <ion-label> DK - Drop Kicks </ion-label>
        </ion-item>
        <ion-item>
          <ion-label> LO - Line Outs </ion-label>
        </ion-item>
        <ion-item>
          <ion-label> OK - Offside Kicks </ion-label>
        </ion-item>
        <ion-item>
          <ion-label> <b> XX </b> H - Hits </ion-label>
        </ion-item>
        <ion-item>
          <ion-label> <b> XX </b> M - Misses </ion-label>
        </ion-item>
        <ion-item>
          <ion-label> <b> XX </b> % - Percentage </ion-label>
        </ion-item>
        <ion-item>
        </ion-item>
      </ion-list>
    </ion-content>
  </ion-menu>

    <ion-menu side="end" contentId="main" menuId="filter">
      <ion-header>
        <ion-toolbar translucent>
          <ion-title> Filter </ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="closeFilterMenu()">
              <ion-icon name="close-outline"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content>
        <ion-item>
          <mat-label position="stacked"> Pick an Athlete </mat-label>
          <ion-select name="games" multiple="true" cancelText="Cancel" okText="Confirm"
                      placeholder="Click to Select" [(ngModel)]="filtered">
            <tr *ngFor="let athleteGameStats of athleteGameStats">
              <ion-select-option value="{{athleteGameStats.athlete.id}}">
                {{athleteGameStats.athlete.profile.name.split(" ",1)}}
              </ion-select-option>
            </tr>
          </ion-select>
        </ion-item>
        <ion-item>
          <ion-button type="submit" class="ion-no-margin" (click)="filterAthlete()">Filter</ion-button>
        </ion-item>
      </ion-content>
    </ion-menu>
  <ion-router-outlet id="main"></ion-router-outlet>

<ng-template [ngIf]="segment === 'form' && hasData">
    <ion-grid>
      <ion-row>
        <ion-col size="2" *ngFor="let ags of athleteGameStats">
          <ion-item button (click)="onClick(ags)">
            <ion-avatar slot="start"> <img [src]="ags.athlete.profile.photo"> </ion-avatar>
            <ion-label> {{ags.athlete.profile.name.split(' ',1)}} </ion-label>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row>
          <ion-col size="4" offset="4">
              <ion-item>
                <ion-label> Selected </ion-label>
                <ng-template [ngIf]="currentAthlete != undefined || currentAthlete.id != 0">
                  <ion-avatar slot="end"> <img [src]="currentAthlete.profile.photo"> </ion-avatar>
                  <ion-label> {{currentAthlete.profile.name.split(' ',1)}} </ion-label>
                </ng-template>
              </ion-item>
          </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size = "3">
          <ion-item>
            <ion-label>
              <div class="ion-text-center">
                <h6 [style.color]="getNegativeColor(currentStats.errors)"> <b> Errors </b> </h6>
              </div>
              <div class="ion-text-center">
                <h6 [style.color]="getNegativeColor(currentStats.errors)"> {{currentStats.errors}} </h6>
              </div>
            </ion-label>
            <ion-buttons slot="end">
              <ion-button color="danger" slot="icon-only"
                          (click)="statsService.increment(currentStats,'errors')">
                <ion-icon name="add-circle-outline"></ion-icon>
              </ion-button>
                <ion-button color="secondary" slot="icon-only"
                            (click)="statsService.decrement(currentStats,'errors')">
                  <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-item>
        </ion-col>
        <ion-col size = "3">
          <ion-item>
            <ion-label>
              <div class="ion-text-center">
                <h6 [style.color]="getNegativeColor(currentStats.fouls)"> <b> Fouls </b> </h6>
              </div>
              <div class="ion-text-center">
                <h6 [style.color]="getNegativeColor(currentStats.fouls)"> {{currentStats.fouls}} </h6>
              </div>
            </ion-label>
            <ion-buttons slot="end">
              <ion-button color="danger" slot="icon-only" size="large"
                          (click)="statsService.increment(currentStats,'fouls')">
                <ion-icon name="add-circle-outline"></ion-icon>
              </ion-button>
                <ion-button color="secondary" slot="icon-only"
                            (click)="statsService.decrement(currentStats,'fouls')">
                  <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-item>
        </ion-col>
        <ion-col size = "3">
          <ion-item>
            <ion-label>
              <div class="ion-text-center">
                <h6 [style.color]="getNegativeColor(currentStats.redCards)"> <b> Red Cards </b> </h6>
              </div>
              <div class="ion-text-center">
                <h6 [style.color]="getNegativeColor(currentStats.redCards)"> {{currentStats.redCards}} </h6>
              </div>
            </ion-label>
            <ion-buttons slot="end">
              <ion-button color="danger" slot="icon-only"
                          (click)="statsService.increment(currentStats,'redCards')">
                <ion-icon name="add-circle-outline"></ion-icon>
              </ion-button>
              <ion-button color="secondary" slot="icon-only"
                          (click)="statsService.decrement(currentStats,'redCards')">
                <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-item>
        </ion-col>

        <ion-col size = "3">
          <ion-item>
            <ion-label>
              <div class="ion-text-center">
                <h6 [style.color]="getNegativeColor(currentStats.yellowCards)"> <b> Yellow Cards </b> </h6>
              </div>
              <div class="ion-text-center">
                <h6 [style.color]="getNegativeColor(currentStats.yellowCards)"> {{currentStats.yellowCards}} </h6>
              </div>
            </ion-label>
            <ion-buttons slot="end">
              <ion-button color="danger" slot="icon-only"
                          (click)="statsService.increment(currentStats,'yellowCards')">
                <ion-icon name="add-circle-outline"></ion-icon>
              </ion-button>
              <ion-button color="secondary" slot="icon-only"
                          (click)="statsService.decrement(currentStats,'yellowCards')">
                <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size = "3">
          <ion-item>
            <ion-label>
              <div class="ion-text-center">
                <h6 [style.color]="getPositiveColor(currentStats.turnOvers)"> <b> Turn Overs </b> </h6>
              </div>
              <div class="ion-text-center">
                <h6 [style.color]="getPositiveColor(currentStats.turnOvers)"> {{currentStats.turnOvers}} </h6>
              </div>
            </ion-label>
            <ion-buttons slot="end">
              <ion-button color="success" slot="icon-only"
                          (click)="statsService.increment(currentStats,'turnOvers')">
                <ion-icon name="add-circle-outline"></ion-icon>
              </ion-button>
              <ion-button color="secondary" slot="icon-only"
                          (click)="statsService.decrement(currentStats,'turnOvers')">
                <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-item>
        </ion-col>
        <ion-col size = "3">
          <ion-item>
            <ion-label>
              <div class="ion-text-center">
                <h6 [style.color]="getPositiveColor(currentStats.tries)"> <b> Tries </b> </h6>
              </div>
              <div class="ion-text-center">
                <h6 [style.color]="getPositiveColor(currentStats.tries)"> {{currentStats.tries}} </h6>
              </div>
            </ion-label>
            <ion-buttons slot="end">
              <ion-button color="success" slot="icon-only"
                          (click)="statsService.increment(currentStats,'tries')">
                <ion-icon name="add-circle-outline"></ion-icon>
              </ion-button>
              <ion-button color="secondary" slot="icon-only"
                          (click)="statsService.decrement(currentStats,'tries')">
                <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-item>
        </ion-col>

        <ion-col size = "3">
          <ion-item>
            <ion-label>
              <div class="ion-text-center">
                <h6 [style.color]="getPositiveColor(currentStats.mauls)"> <b> Mauls </b> </h6>
              </div>
              <div class="ion-text-center">
                <h6 [style.color]="getPositiveColor(currentStats.mauls)"> {{currentStats.mauls}} </h6>
              </div>
            </ion-label>
            <ion-buttons slot="end">
              <ion-button color="success" slot="icon-only"
                          (click)="statsService.increment(currentStats,'mauls')">
                <ion-icon name="add-circle-outline"></ion-icon>
              </ion-button>
              <ion-button color="secondary" slot="icon-only"
                          (click)="statsService.decrement(currentStats,'mauls')">
                <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-item>
        </ion-col>

        <ion-col size = "3">
          <ion-item>
            <ion-label>
              <div class="ion-text-center">
                <h6 [style.color]="getPositiveColor(currentStats.playingTime)"> <b> Playing Time </b> </h6>
              </div>
              <div class="ion-text-center">
                <h6 [style.color]="getPositiveColor(currentStats.playingTime)"> {{currentStats.playingTime}} </h6>
              </div>
            </ion-label>
            <ion-buttons slot="end">
              <ion-button color="success" slot="icon-only"
                          (click)="statsService.increment(currentStats,'playingTime')">
                <ion-icon name="add-circle-outline"></ion-icon>
              </ion-button>
              <ion-button color="secondary" slot="icon-only"
                          (click)="statsService.decrement(currentStats,'playingTime')">
                <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <ion-item>
            <ion-label [style.color]="getColorPercent(statsService.percentage(currentStats,'tacklesHit','tacklesMiss'))">
              <div class="ion-text-center">
                <h6 > <b> {{statsService.percentage(currentStats,'tacklesHit','tacklesMiss')}} % </b> </h6>
              </div>
            </ion-label>
            <ion-label [style.color]="getColorPercent(statsService.percentage(currentStats,'tacklesHit','tacklesMiss'))">
              <div class="ion-text-center">
                <h6 > <b> Tackles </b> </h6>
              </div>
              <div class="ion-text-center">
                <h6> {{currentStats.tacklesHit}} - {{currentStats.tacklesMiss}} </h6>
              </div>
            </ion-label>
            <ion-buttons slot="end">
              <ion-button color="success" slot="icon-only" class="ion-no-padding"
                          (click)="statsService.increment(currentStats,'tacklesHit')">
                <ion-icon name="add-circle-outline"></ion-icon>
              </ion-button>
              <ion-button color="secondary" slot="icon-only" class="ion-no-padding"
                          (click)="statsService.decrement(currentStats,'tacklesHit')">
                <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
              <ion-button color="danger" slot="icon-only"
                          (click)="statsService.increment(currentStats,'tacklesMiss')">
                <ion-icon name="remove-circle-outline"></ion-icon>
              </ion-button>
              <ion-button color="secondary" slot="icon-only"
                          (click)="statsService.decrement(currentStats,'tacklesMiss')">
                <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-item>
        </ion-col>

        <ion-col>
          <ion-item>
            <ion-label [style.color]="getColorPercent(statsService.percentage(currentStats,'conversionkicksHit','conversionkicksMiss'))">
              <div class="ion-text-center">
                <h6 > <b> {{statsService.percentage(currentStats,'conversionkicksHit','conversionkicksMiss')}} % </b> </h6>
              </div>
            </ion-label>
            <ion-label [style.color]="getColorPercent(statsService.percentage(currentStats,'conversionkicksHit','conversionkicksMiss'))">
              <div class="ion-text-center">
                <h6 > <b> Conversion Kicks </b> </h6>
              </div>
              <div class="ion-text-center">
                <h6> {{currentStats.conversionkicksHit}} - {{currentStats.conversionkicksMiss}} </h6>
              </div>
            </ion-label>
            <ion-buttons slot="end">
              <ion-button color="success" slot="icon-only" class="ion-no-padding"
                          (click)="statsService.increment(currentStats,'conversionkicksHit')">
                <ion-icon name="add-circle-outline"></ion-icon>
              </ion-button>
              <ion-button color="secondary" slot="icon-only" class="ion-no-padding"
                          (click)="statsService.decrement(currentStats,'conversionkicksHit')">
                <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
              <ion-button color="danger" slot="icon-only"
                          (click)="statsService.increment(currentStats,'conversionkicksMiss')">
                <ion-icon name="remove-circle-outline"></ion-icon>
              </ion-button>
              <ion-button color="secondary" slot="icon-only"
                          (click)="statsService.decrement(currentStats,'conversionkicksMiss')">
                <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <ion-item>
            <ion-label [style.color]="getColorPercent(statsService.percentage(currentStats,'goalkicksHit','goalkicksMiss'))">
              <div class="ion-text-center">
                <h6 > <b> {{statsService.percentage(currentStats,'goalkicksHit','goalkicksMiss')}} % </b> </h6>
              </div>
            </ion-label>
            <ion-label [style.color]="getColorPercent(statsService.percentage(currentStats,'goalkicksHit','goalkicksMiss'))">
              <div class="ion-text-center">
                <h6 > <b> Goal Kicks </b> </h6>
              </div>
              <div class="ion-text-center">
                <h6> {{currentStats.goalkicksHit}} - {{currentStats.goalkicksMiss}} </h6>
              </div>
            </ion-label>
            <ion-buttons slot="end">
              <ion-button color="success" slot="icon-only" class="ion-no-padding"
                          (click)="statsService.increment(currentStats,'goalkicksHit')">
                <ion-icon name="add-circle-outline"></ion-icon>
              </ion-button>
              <ion-button color="secondary" slot="icon-only" class="ion-no-padding"
                          (click)="statsService.decrement(currentStats,'goalkicksHit')">
                <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
              <ion-button color="danger" slot="icon-only"
                          (click)="statsService.increment(currentStats,'goalkicksMiss')">
                <ion-icon name="remove-circle-outline"></ion-icon>
              </ion-button>
              <ion-button color="secondary" slot="icon-only"
                          (click)="statsService.decrement(currentStats,'goalkicksMiss')">
                <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-item>
        </ion-col>

        <ion-col>
          <ion-item>
            <ion-label [style.color]="getColorPercent(statsService.percentage(currentStats,'dropkicksHit','dropkicksMiss'))">
              <div class="ion-text-center">
                <h6 > <b> {{statsService.percentage(currentStats,'dropkicksHit','dropkicksMiss')}} % </b> </h6>
              </div>
            </ion-label>
            <ion-label [style.color]="getColorPercent(statsService.percentage(currentStats,'dropkicksHit','dropkicksMiss'))">
              <div class="ion-text-center">
                <h6 > <b> Drop Kicks </b> </h6>
              </div>
              <div class="ion-text-center">
                <h6> {{currentStats.dropkicksHit}} - {{currentStats.dropkicksMiss}} </h6>
              </div>
            </ion-label>
            <ion-buttons slot="end">
              <ion-button color="success" slot="icon-only" class="ion-no-padding"
                          (click)="statsService.increment(currentStats,'dropkicksHit')">
                <ion-icon name="add-circle-outline"></ion-icon>
              </ion-button>
              <ion-button color="secondary" slot="icon-only" class="ion-no-padding"
                          (click)="statsService.decrement(currentStats,'dropkicksHit')">
                <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
              <ion-button color="danger" slot="icon-only"
                          (click)="statsService.increment(currentStats,'dropkicksMiss')">
                <ion-icon name="remove-circle-outline"></ion-icon>
              </ion-button>
              <ion-button color="secondary" slot="icon-only"
                          (click)="statsService.decrement(currentStats,'dropkicksMiss')">
                <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <ion-item>
            <ion-label [style.color]="getColorPercent(statsService.percentage(currentStats,'lineoutsHit','lineoutsMiss'))">
              <div class="ion-text-center">
                <h6 > <b> {{statsService.percentage(currentStats,'lineoutsHit','lineoutsMiss')}} % </b> </h6>
              </div>
            </ion-label>
            <ion-label [style.color]="getColorPercent(statsService.percentage(currentStats,'lineoutsHit','lineoutsMiss'))">
              <div class="ion-text-center">
                <h6 > <b> Line Outs </b> </h6>
              </div>
              <div class="ion-text-center">
                <h6> {{currentStats.lineoutsHit}} - {{currentStats.lineoutsMiss}} </h6>
              </div>
            </ion-label>
            <ion-buttons slot="end">
              <ion-button color="success" slot="icon-only" class="ion-no-padding"
                          (click)="statsService.increment(currentStats,'lineoutsHit')">
                <ion-icon name="add-circle-outline"></ion-icon>
              </ion-button>
              <ion-button color="secondary" slot="icon-only" class="ion-no-padding"
                          (click)="statsService.decrement(currentStats,'lineoutsHit')">
                <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
              <ion-button color="danger" slot="icon-only"
                          (click)="statsService.increment(currentStats,'lineoutsMiss')">
                <ion-icon name="remove-circle-outline"></ion-icon>
              </ion-button>
              <ion-button color="secondary" slot="icon-only"
                          (click)="statsService.decrement(currentStats,'lineoutsMiss')">
                <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-item>
        </ion-col>

        <ion-col>
          <ion-item>
            <ion-label [style.color]="getColorPercent(statsService.percentage(currentStats,'offsidekicksHit','offsidekicksMiss'))">
              <div class="ion-text-center">
                <h6 > <b> {{statsService.percentage(currentStats,'offsidekicksHit','offsidekicksMiss')}} % </b> </h6>
              </div>
            </ion-label>
            <ion-label [style.color]="getColorPercent(statsService.percentage(currentStats,'offsidekicksHit','offsidekicksMiss'))">
              <div class="ion-text-center">
                <h6 > <b> Offside Kicks </b> </h6>
              </div>
              <div class="ion-text-center">
                <h6> {{currentStats.offsidekicksHit}} - {{currentStats.offsidekicksMiss}} </h6>
              </div>
            </ion-label>
            <ion-buttons slot="end">
              <ion-button color="success" slot="icon-only" class="ion-no-padding"
                          (click)="statsService.increment(currentStats,'offsidekicksHit')">
                <ion-icon name="add-circle-outline"></ion-icon>
              </ion-button>
              <ion-button color="secondary" slot="icon-only" class="ion-no-padding"
                          (click)="statsService.decrement(currentStats,'offsidekicksHit')">
                <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
              <ion-button color="danger" slot="icon-only"
                          (click)="statsService.increment(currentStats,'offsidekicksMiss')">
                <ion-icon name="remove-circle-outline"></ion-icon>
              </ion-button>
              <ion-button color="secondary" slot="icon-only"
                          (click)="statsService.decrement(currentStats,'offsidekicksMiss')">
                <ion-icon name="arrow-undo-outline"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-item>
        <ion-button type="submit" class="ion-no-margin">Submit</ion-button>
      </ion-item>
    </ion-grid>
</ng-template>

  <div [hidden]="segment!='preview'">
    <canvas id="canvas"> {{chart}}</canvas>
    <ion-grid>
      <ion-row>
        <ion-item *ngFor = "let item of checkBoxList">
          <ion-label> {{item.name}} </ion-label>
          <ion-checkbox slot="start" [(ngModel)]="item.isChecked" (ionChange)="pushTest($event,item.property)"> </ion-checkbox>
        </ion-item>
        <ion-item>
          <ion-label> All </ion-label>
          <ion-checkbox slot="start" [(ngModel)]="all" (click)="onAll($event)"></ion-checkbox>
        </ion-item>
      </ion-row>
    </ion-grid>
  </div>
